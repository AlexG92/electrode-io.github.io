---
title:  "Docker"
permalink: docs/docker.html
toplevel: "Getting Started: Intermediate"
---

###Deploy with Docker

Docker is a new container based technology that is designed to make applications easier to create, deploy and run. It is an increasing popular way to accelerate development and share content. To get started, sign up for a [Docker] (https://cloud.docker.com), download [Docker for your machine](https://www.docker.com/products/docker) and read over the corresponding system requirements. Docker requires a Linux Machine; if you are using a Mac you will need to follow the instructions based on your computer version to "[virtualize the Docker Engine environment] (https://docs.docker.com/engine/installation/mac/#/docker-for-mac) and Linux kernel-specific features for the Docker daemon" using a virtual machine.

After you install and run Docker on your machine, you will be asked to authorize `Docker.app`. Double-click `Docker.app` to start Docker. The Docker Whale icon in the top status bar will let you know that Docker is running.

On the first installation you will get a `success` message. Click the Whale icon to go to `Preferences`. Select `About Docker` to verify you have the latest version.

Let's check the versions of `Docker Engine`, `Compose` and `Machine` by running the commands below:

```bash
$ docker --version
	Docker version 1.12.0, build 8eab29e

	$ docker-compose --version
	docker-compose version 1.8.0, build f3628c7

	$ docker-machine --version
	docker-machine version 0.8.0, build b85aac1
```

Launch Boot2Docker and create your images folder by using the command below:

```bash
$ docker@boot2docker:~$ mkdir images
```

Set the Docker_Host environment variable

```bash
$ export DOCKER_HOST=tcp://192.168.59.103:2375
```

Create a Dockerfile, a set of instructions to let Docker know how we would like to build our container:

```bash
$ touch Dockerfile && touch .dockerignore && docker.yml
```

In your Dockerfile add:

```bash
# Dockerfile

FROM node:4.5

# Replace shell with bash so we can source files
RUN rm /bin/sh && ln -s /bin/bash /bin/sh

# Run updates and install deps
RUN apt-get update

RUN apt-get install -y -q --no-install-recommends \
    apt-transport-https \
    build-essential \
    curl \
    git \
    nginx \
    sudo \
    wget \
    && rm -rf /var/lib/apt/lists/* \
    && apt-get -y autoclean

ENV NVM_DIR /usr/local/nvm
ENV NODE_VERSION 4.3.0

# Install nvm with node and npm
RUN curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.29.0/install.sh | bash \
    && source $NVM_DIR/nvm.sh \
    && nvm install $NODE_VERSION \
    && nvm alias default $NODE_VERSION \
    && nvm use default

# Set up our PATH correctly so we don't have to long-reference npm, node, &c.
ENV NODE_PATH $NVM_DIR/versions/node/v$NODE_VERSION/lib/node_modules
ENV PATH      $NVM_DIR/versions/node/v$NODE_VERSION/bin:$PATH

# Set the work directory
RUN mkdir -p /usr/src/app
WORKDIR /usr/src/app

# Add our package.json
RUN npm i -g npm@3

ADD package.json ./

# Copy application files
COPY package.json /usr/src/app
COPY server /usr/src/app/server
COPY client /usr/src/app/client
COPY config /usr/src/app/config
COPY gulpfile.js /usr/src/app
COPY .babelrc /usr/src/app

#
RUN npm install
RUN /usr/src/app/node_modules/.bin/gulp build

#Expose the port
EXPOSE 3000

CMD [node server]
```

In your .dockerignore file add:

```bash
.git
.gitignore
node_modules
```
